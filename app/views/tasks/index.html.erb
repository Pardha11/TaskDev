<p style="color: green"><%= notice %></p>

<% content_for :title, "Tasks" %>

<h1>Tasks</h1>

<div id="tasks">
  <div class="container mt-5">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      <% @tasks.each do |task| %>
        <div class="col">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">title goes here</h5>
              <p class="card-text">Lorem ipsum</p>
              <p class="card-text"><strong>Payout: </strong> $<%= task.price %></p>
              <p class="card-text"><strong>Technologies:</strong> Placeholder</p>
            </div>
            <div class="card-footer">
              <%= link_to "Show", task, class: "btn btn-primary" %>
              <% if task.status == 'pending' %>
                <%= button_to "Mark as Done", mark_as_done_task_path(task), 
                    params: { task: { id: task.id, status: 'done' } }, 
                    method: :patch, data: { confirm: "Mark this task as done?" }, class: "btn btn-primary" %>
              <% else %>
                <%= button_to "Mark as Pending", mark_as_pending_task_path(task), 
                    params: { task: { id: task.id, status: 'pending' } }, 
                    method: :patch, data: { confirm: "Mark this task as pending?" }, class: "btn btn-primary" %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%= link_to "New task", new_task_path %>
<%= link_to "Back to Home", root_path %>